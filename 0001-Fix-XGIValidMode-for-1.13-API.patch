From b2c37cc563583e703b4b8889b04400c14987b935 Mon Sep 17 00:00:00 2001
From: Adam Jackson <ajax@redhat.com>
Date: Mon, 7 Jan 2013 10:15:51 -0500
Subject: [PATCH] Fix XGIValidMode for 1.13 API

Signed-off-by: Adam Jackson <ajax@redhat.com>
---
 src/xgi_driver.c | 4 ++--
 src/xgi_driver.h | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/xgi_driver.c b/src/xgi_driver.c
index a7dd2e2..0292296 100755
--- a/src/xgi_driver.c
+++ b/src/xgi_driver.c
@@ -5707,9 +5707,9 @@ int XGIValidateUserDefMode(XGIPtr pXGI, DisplayModePtr mode)
 /* Checks if a mode is suitable for the selected chipset. */
 
 static int
-XGIValidMode(int scrnIndex, DisplayModePtr mode, Bool verbose, int flags)
+XGIValidMode(SCRN_ARG_TYPE arg, DisplayModePtr mode, Bool verbose, int flags)
 {
-    ScrnInfoPtr pScrn = xf86Screens[scrnIndex];
+    SCRN_INFO_PTR(arg);
     XGIPtr pXGI = XGIPTR(pScrn);
     int HDisplay = mode->HDisplay;
     int VDisplay = mode->VDisplay;
diff --git a/src/xgi_driver.h b/src/xgi_driver.h
index 76a25e3..0754f16 100755
--- a/src/xgi_driver.h
+++ b/src/xgi_driver.h
@@ -741,7 +741,7 @@ static Bool XGISaveScreenDH(ScreenPtr pScreen, int mode);
 /* Optional functions */
 static void       XGIFreeScreen(FREE_SCREEN_ARGS_DECL);
 
-static int      XGIValidMode(int scrnIndex, DisplayModePtr mode, Bool verbose,
+static int      XGIValidMode(SCRN_ARG_TYPE arg, DisplayModePtr mode, Bool verbose,
                              int flags);
 /* Internally used functions */
 static Bool    XGIMapMem(ScrnInfoPtr pScrn);
-- 
1.8.0.2

